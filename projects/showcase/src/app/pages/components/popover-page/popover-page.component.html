<div class="docs-page">
  <div class="page-header">
    <h1>{{ pageConfig.title | translate }}</h1>
    <p class="subtitle">{{ pageConfig.subtitle | translate }}</p>
  </div>

  @for (section of pageConfig.sections; track section.id) {
    <section class="section">
      <app-section-title
        [title]="section.title | translate"
        [anchor]="section.anchor"
      ></app-section-title>

      <p class="section-description">
        {{ section.description | translate }}
      </p>

      @if (section.note; as note) {
        <div class="section-note" [ngClass]="note.type">
          <i [class]="getSectionNoteIcon(note)"></i>
          <p [innerHTML]="note.content | translate"></p>
        </div>
      }

      @switch (section.id) {
        @case ('basic') {
          <div class="example-preview">
            <nui-button nuiPopover="Información adicional del elemento">Ver información</nui-button>
          </div>
        }

        @case ('positions') {
          <div class="example-preview">
            <nui-button nuiPopover="Popover arriba" nuiPopoverPosition="top">Top</nui-button>
            <nui-button nuiPopover="Popover abajo" nuiPopoverPosition="bottom">Bottom</nui-button>
            <nui-button nuiPopover="Popover izquierda" nuiPopoverPosition="left">Left</nui-button>
            <nui-button nuiPopover="Popover derecha" nuiPopoverPosition="right">Right</nui-button>
          </div>
        }

        @case ('events') {
          <div class="example-preview flex-column">
            <div class="events-row">
              <nui-button nuiPopover="Popover con click (default)" nuiPopoverEvent="click">
                Click Event
              </nui-button>

              <nui-button nuiPopover="Popover con hover" nuiPopoverEvent="hover">
                Hover Event
              </nui-button>
            </div>

            <div class="events-row">
              <input
                type="text"
                nuiPopover="Ayuda para este campo"
                nuiPopoverEvent="focus"
                placeholder="Enfoca para ver ayuda"
                class="example-input"
              />
            </div>
          </div>
        }

        @case ('template') {
          <div class="example-preview">
            <nui-button [nuiPopover]="popoverTemplate">Ver detalles</nui-button>

            <ng-template #popoverTemplate let-close="close">
              <div class="custom-popover">
                <h3 class="custom-popover__title">Título del Popover</h3>
                <p class="custom-popover__text">
                  Este es el contenido del popover con un template personalizado.
                </p>
                <div class="custom-popover__actions">
                  <nui-button size="sm" variant="outline" (onClick)="close()">Cancelar</nui-button>
                  <nui-button size="sm" (onClick)="handleAction(); close()">Aceptar</nui-button>
                </div>
              </div>
            </ng-template>
          </div>
        }

        @case ('component') {
          <div class="example-preview">
            <nui-button
              [nuiPopover]="UserProfilePopoverComponent"
              [nuiPopoverData]="{ userId: 123, userName: 'Juan Pérez' }"
              nuiPopoverPosition="bottom"
            >
              Ver perfil de usuario
            </nui-button>
          </div>
        }

        @case ('delays') {
          <div class="example-preview">
            <nui-button nuiPopover="Aparece después de 500ms" [nuiPopoverShowDelay]="500">
              Show Delay (500ms)
            </nui-button>

            <nui-button
              nuiPopover="Se oculta después de 1s"
              nuiPopoverEvent="hover"
              [nuiPopoverHideDelay]="1000"
            >
              Hide Delay (1000ms)
            </nui-button>

            <nui-button
              nuiPopover="Delays combinados"
              nuiPopoverEvent="hover"
              [nuiPopoverShowDelay]="300"
              [nuiPopoverHideDelay]="500"
            >
              Both Delays
            </nui-button>
          </div>
        }

        @case ('customization') {
          <div class="example-preview">
            <nui-button nuiPopover="Popover sin flecha" [nuiPopoverShowArrow]="false">
              Sin flecha
            </nui-button>

            <nui-button
              nuiPopover="Popover con ancho personalizado de 400px para mostrar más contenido en una línea"
              nuiPopoverMaxWidth="400px"
            >
              Ancho custom (400px)
            </nui-button>

            <nui-button
              nuiPopover="Popover con estilo custom: fondo degradado, borde y sombra personalizada"
              nuiPopoverClass="my-custom-popover"
              nuiPopoverPosition="top"
            >
              Clase custom
            </nui-button>

            <nui-button nuiPopover="Mayor separación del trigger" [nuiPopoverOffset]="20">
              Offset 20px
            </nui-button>
          </div>
        }

        @case ('closeOptions') {
          <div class="example-preview flex-column">
            <div class="events-row">
              <nui-button
                nuiPopover="No se cierra al hacer click fuera. Usa Escape o click en el botón."
                [nuiPopoverCloseOnClickOutside]="false"
              >
                Click Outside OFF
              </nui-button>

              <nui-button
                nuiPopover="No se cierra con la tecla Escape. Haz click fuera para cerrar."
                [nuiPopoverCloseOnEscape]="false"
              >
                Escape OFF
              </nui-button>
            </div>

            <div class="events-row">
              <nui-button nuiPopover="Popover múltiple 1" [nuiPopoverAllowMultiple]="true">
                Multiple 1
              </nui-button>

              <nui-button nuiPopover="Popover múltiple 2" [nuiPopoverAllowMultiple]="true">
                Multiple 2
              </nui-button>
            </div>
          </div>
        }

        @case ('backdrop') {
          <div class="example-preview">
            <nui-button [nuiPopover]="backdropTemplate" [nuiPopoverBackdrop]="true">
              Con Backdrop
            </nui-button>

            <nui-button
              [nuiPopover]="backdropNoCloseTemplate"
              [nuiPopoverBackdrop]="true"
              [nuiBackdropClose]="false"
            >
              Backdrop sin cierre
            </nui-button>

            <ng-template #backdropTemplate let-close="close">
              <div class="nui-modal-popover">
                <h3 class="nui-modal-popover__title">Popover Modal</h3>
                <p class="nui-modal-popover__text">
                  Este popover tiene un backdrop oscuro detrás. Haz click fuera para cerrar.
                </p>
                <nui-button (onClick)="close()">Cerrar</nui-button>
              </div>
            </ng-template>

            <ng-template #backdropNoCloseTemplate let-close="close">
              <div class="nui-modal-popover">
                <h3 class="nui-modal-popover__title">Popover Modal</h3>
                <p class="nui-modal-popover__text">
                  Este popover no se cierra al hacer click en el backdrop. Usa el botón para cerrar.
                </p>
                <nui-button (onClick)="close()">Cerrar</nui-button>
              </div>
            </ng-template>
          </div>
        }

        @case ('disabled') {
          <div class="example-preview">
            <nui-button
              nuiPopover="Popover condicional según el estado del botón"
              [nuiPopoverDisabled]="isDisabled()"
            >
              Popover condicional
            </nui-button>

            <nui-button variant="outline" (onClick)="toggleDisabled()">
              Toggle (Status: {{ !isDisabled() }})
            </nui-button>
          </div>
        }
      }

      <app-code-block [examples]="section.examples || []"></app-code-block>
    </section>
  }
</div>
