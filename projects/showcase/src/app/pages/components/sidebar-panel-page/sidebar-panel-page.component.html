<div class="docs-page">
  <div class="container-fluid">
    <div class="page-header">
      <h1>{{ pageConfig.title | translate }}</h1>
      <p class="subtitle" [innerHTML]="pageConfig.subtitle | translate"></p>
    </div>

    <div class="docs-content">
      @for (section of pageConfig.sections; track section.id) {
        <section class="section">
          <app-section-title
            [title]="section.title | translate"
            [anchor]="section.anchor"
          ></app-section-title>

          <p class="section-description" [innerHTML]="section.description | translate"></p>

          @if (section.note; as note) {
            <div class="section-note" [ngClass]="note.type">
              <i [class]="getSectionNoteIcon(note)"></i>
              <p [innerHTML]="note.content | translate"></p>
            </div>
          }

          @switch (section.id) {
            @case ('basic') {
              <div class="example-preview">
                <nui-button (click)="openBasicPanel()">Open Panel</nui-button>
              </div>
            }

            @case ('defaults') {
              <div class="example-preview">
                <nui-button [color]="'primary'" (click)="openPanelWithDefaults()">
                  Open Panel with Defaults
                </nui-button>
              </div>
            }

            @case ('sizes') {
              <div class="example-preview example-preview--spaced">
                <nui-button (click)="openPanelWithSize('xs')">XSmall (300px)</nui-button>
                <nui-button (click)="openPanelWithSize('sm')">Small (400px)</nui-button>
                <nui-button (click)="openPanelWithSize('md')">Medium (600px)</nui-button>
                <nui-button (click)="openPanelWithSize('lg')">Large (800px)</nui-button>
                <nui-button (click)="openPanelWithSize('xl')">XLarge (1000px)</nui-button>
                <nui-button (click)="openPanelWithSize('full')">Full (100%)</nui-button>
              </div>
            }

            @case ('positions') {
              <div class="example-preview example-preview--spaced">
                <nui-button (click)="openPanelWithPosition('left')">From Left</nui-button>
                <nui-button (click)="openPanelWithPosition('right')">From Right</nui-button>
                <nui-button (click)="openPanelWithPosition('top')">From Top</nui-button>
                <nui-button (click)="openPanelWithPosition('bottom')">From Bottom</nui-button>
              </div>
            }

            @case ('dynamic-component') {
              <div class="example-preview">
                <nui-button (click)="openDynamicPanel()">Open Panel with Dynamic Data</nui-button>
              </div>
            }

            @case ('html-content') {
              <div class="example-preview example-preview--spaced">
                <nui-button (click)="openHtmlNotificationPanel()">
                  Simple HTML Notification
                </nui-button>
                <nui-button [color]="'primary'" (click)="openDynamicHtmlPanel()">
                  Dynamic HTML Report
                </nui-button>
              </div>
            }

            @case ('template-content') {
              <div class="example-preview">
                <nui-button [color]="'primary'" (click)="openTemplatePanel()">
                  Open Template Panel
                </nui-button>
              </div>
            }

            @case ('dynamic-component-events') {
              <div class="example-preview">
                <nui-button [color]="'primary'" (click)="openPanelWithEvents()">
                  Open Panel with Events
                </nui-button>
              </div>
            }

            @case ('minimizable') {
              <div class="example-preview example-preview--spaced">
                <nui-button (click)="openMinimizablePanel()">Open Minimizable Panel</nui-button>
                <nui-button (click)="openMinimizablePanel2()">
                  Open Another Minimizable Panel
                </nui-button>
                <nui-button [color]="'primary'" (click)="openChatSupportPanel()">
                  Chat Support (Floating Button)
                </nui-button>
              </div>
            }

            @case ('close-button') {
              <div class="example-preview">
                <nui-button (click)="openPanelWithoutCloseButton()">
                  Open Panel without Close Button
                </nui-button>
              </div>
            }

            @case ('backdrop') {
              <div class="example-preview">
                <nui-button (click)="openPanelWithoutBackdrop()">
                  Open Panel without Backdrop
                </nui-button>
              </div>
            }

            @case ('custom-backdrop') {
              <div class="example-preview">
                <nui-button [color]="'primary'" (click)="openPanelWithCustomBackdrop()">
                  Open Panel with Custom Backdrop
                </nui-button>
              </div>
            }

            @case ('multiple') {
              <div class="example-preview example-preview--spaced">
                <nui-button (click)="openMultiplePanels()">Open Multiple Panels</nui-button>
              </div>
            }

            @case ('footer-actions') {
              <div class="example-preview example-preview--spaced">
                <nui-button [color]="'primary'" (click)="openPanelWithFooterActions()">
                  Básico (Cancelar/Guardar)
                </nui-button>
                <nui-button [color]="'primary'" (click)="openPanelWithVariedActions()">
                  Diferentes Estilos
                </nui-button>
                <nui-button [color]="'primary'" (click)="openPanelWithLoadingActions()">
                  Loading States
                </nui-button>
                <nui-button [color]="'primary'" (click)="openPanelWithConditionalActions()">
                  Botones Condicionales
                </nui-button>
                <nui-button [color]="'primary'" (click)="openPanelWithCustomFooterTemplate()">
                  Template Custom
                </nui-button>
                <nui-button [color]="'primary'" (click)="openPanelWithComplexActions()">
                  Caso Complejo (4 Actions)
                </nui-button>
              </div>
            }
          }

          <app-code-block [examples]="section.examples || []"></app-code-block>
        </section>
      }
    </div>
  </div>
</div>

<!-- Template para el ejemplo de contenido flexible -->
<ng-template #userDetailsTemplate let-user="user" let-onRefresh="onRefresh" let-onLogout="onLogout">
  <div style="padding: 1.5rem">
    <!-- User Avatar & Name -->
    <div
      style="
        display: flex;
        align-items: center;
        gap: 1rem;
        margin-bottom: 1.5rem;
        padding-bottom: 1rem;
        border-bottom: 1px solid var(--nui-divider);
      "
    >
      <img
        [src]="user.avatar"
        alt="User Avatar"
        style="
          width: 64px;
          height: 64px;
          border-radius: 50%;
          object-fit: cover;
          border: 2px solid var(--nui-primary-main);
        "
      />
      <div>
        <h3 style="margin: 0; font-size: 1.25rem; font-weight: 600">{{ user.name }}</h3>
        <p style="margin: 0.25rem 0 0 0; color: var(--nui-text-secondary); font-size: 0.875rem">
          {{ user.role }}
        </p>
      </div>
    </div>

    <!-- User Details -->
    <div style="margin-bottom: 1.5rem">
      <div style="margin-bottom: 1rem">
        <label
          style="
            display: block;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            color: var(--nui-text-secondary);
            margin-bottom: 0.25rem;
          "
        >
          Email
        </label>
        <p style="margin: 0; font-size: 0.875rem">{{ user.email }}</p>
      </div>

      <div style="margin-bottom: 1rem">
        <label
          style="
            display: block;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            color: var(--nui-text-secondary);
            margin-bottom: 0.25rem;
          "
        >
          Role
        </label>
        <span
          style="
            display: inline-block;
            padding: 0.25rem 0.75rem;
            background: var(--nui-primary-light);
            color: var(--nui-primary-dark);
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 500;
          "
        >
          {{ user.role }}
        </span>
      </div>

      <div>
        <label
          style="
            display: block;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            color: var(--nui-text-secondary);
            margin-bottom: 0.25rem;
          "
        >
          Last Login
        </label>
        <p style="margin: 0; font-size: 0.875rem">{{ user.lastLogin | date: 'medium' }}</p>
      </div>
    </div>

    <!-- Actions -->
    <div style="display: flex; gap: 0.75rem">
      <nui-button (onClick)="onRefresh()" [icon]="'ri-refresh-line'">Refresh</nui-button>
      <nui-button (onClick)="onLogout()" [color]="'secondary'" [icon]="'ri-logout-box-line'">
        Logout
      </nui-button>
    </div>
  </div>
</ng-template>

<!-- Template para footer personalizado -->
<ng-template #customFooterTemplate>
  <div>
    <!-- Info section -->
    <div
      style="
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.5rem;
        background: var(--nui-warning-light);
        border-radius: 4px;
        color: var(--nui-warning-dark);
        font-size: 0.875rem;
      "
    >
      <i class="ri-information-line" style="font-size: 1.25rem"></i>
      <span>Los cambios sin guardar se perderán</span>
    </div>

    <!-- Action buttons -->
    <div style="display: flex; gap: 0.5rem; justify-content: flex-end">
      <nui-button [color]="'secondary'" [variant]="'ghost'" [icon]="'ri-close-line'">
        Cancelar
      </nui-button>
      <nui-button [color]="'info'" [variant]="'outline'" [icon]="'ri-file-copy-line'">
        Duplicar
      </nui-button>
      <nui-button [color]="'success'" [variant]="'solid'" [icon]="'ri-check-line'">
        Confirmar
      </nui-button>
    </div>
  </div>
</ng-template>

<!-- Template para footer con loading states reactivos -->
<ng-template #loadingActionsTemplate>
  <div
    style="
      display: flex;
      gap: 0.5rem;
      justify-content: flex-end;
    "
  >
    <nui-button
      [color]="'secondary'"
      [variant]="'outline'"
      [disabled]="isProcessing()"
      (click)="cancelLoadingPanel()"
    >
      Cancelar
    </nui-button>
    <nui-button
      [color]="'primary'"
      [icon]="'ri-refresh-line'"
      [disabled]="isProcessing()"
      [loading]="isProcessing()"
      (click)="processLoadingAction()"
    >
      Procesar
    </nui-button>
  </div>
</ng-template>
