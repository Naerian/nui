@use "../../../../styles/mixins";
@use "../../../../styles/variables/action-menu/action-menu-variables";

.nui-action-menu,
.nui-action-menu-submenu {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  min-width: var(--nui-action-menu-min-width);
  max-width: var(--nui-action-menu-max-width);
  border: var(--nui-action-menu-border-width) solid
    var(--nui-action-menu-border-color);
  background-color: var(--nui-action-menu-bg);
  border-radius: var(--nui-action-menu-border-radius);
  padding: var(--nui-action-menu-padding);
  box-shadow: var(--nui-action-menu-shadow);
  gap: var(--nui-action-menu-padding); // Coherencia con el padding

  &--fullWidth {
    width: 100%;
  }

  &--static {
    box-shadow: var(--nui-action-menu-static-shadow);
  }

  // Templates start y end (header y footer)
  &__start,
  &__end {
    width: 100%;
    padding: var(--nui-action-menu-padding);
  }

  &__start {
    margin-bottom: var(--nui-action-menu-padding);
    border-bottom: 1px solid var(--nui-action-menu-separator-color);

    // Ocultar si está vacío (solo para contenido proyectado con ng-content)
    &--projected:empty {
      display: none;
      margin-bottom: 0;
      border-bottom: none;
    }
  }

  &__end {
    margin-top: var(--nui-action-menu-padding);
    border-top: 1px solid var(--nui-action-menu-separator-color);

    // Ocultar si está vacío (solo para contenido proyectado con ng-content)
    &--projected:empty {
      display: none;
      margin-top: 0;
      border-top: none;
    }
  }

  // Separador
  &__separator {
    width: 100%;
    height: 1px;
    background-color: var(--nui-action-menu-separator-color);
    margin: var(--nui-action-menu-padding) 0;

    &--labeled {
      height: auto;
      background-color: transparent;
      display: flex;
      align-items: center;
      padding: 0;
      gap: var(--nui-action-menu-separator-label-spacing);

      &::before,
      &::after {
        content: "";
        flex: 1;
        height: 1px;
        background-color: var(--nui-action-menu-separator-color);
      }
    }

    &__label {
      font-size: 0.75rem;
      font-weight: var(--nui-action-menu-separator-font-weight);
      color: var(--nui-action-menu-separator-label-color);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      white-space: nowrap;
      flex-shrink: 0; // No se encoge, mantiene su tamaño
    }
  }

  &__item {
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    text-align: left;
    overflow: hidden;
    background-color: var(--nui-action-menu-item-bg);
    border: var(--nui-action-menu-item-border);
    color: var(--nui-action-menu-item-color);
    border-radius: var(--nui-action-menu-item-border-radius);
    user-select: none;
    cursor: pointer;
    gap: var(--nui-action-menu-item-gap);

    &__container {
      display: flex;
      align-items: center;
      gap: var(--nui-action-menu-item-gap);
      flex: 1 1 auto;
      overflow: hidden;
      min-width: 0;
    }

    &__text {
      display: flex;
      flex-direction: column;
      gap: 4px; // Reducido de 2px a 4px para menos espacio entre title y subtitle
      flex: 1;
      min-width: 0;
    }

    &__label {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      display: block;
      margin-right: var(--nui-action-menu-item-label-margin-right);
      line-height: 1;
    }

    &__subtitle {
      font-size: var(--nui-action-menu-item-subtitle-font-size);
      color: var(--nui-action-menu-item-subtitle-color);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      display: block;
    }

    &__icon {
      font-size: inherit;
      flex-shrink: 0;
    }

    &__check {
      font-size: 1.25em;
      flex-shrink: 0;
      margin-left: auto;
    }

    &__shortcut {
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;
      background-color: var(--nui-action-menu-shortcut-bg);
      color: var(--nui-action-menu-shortcut-color);
      padding: var(--nui-action-menu-shortcut-padding);
      border-radius: var(--nui-action-menu-shortcut-border-radius);
      border: var(--nui-action-menu-shortcut-border-width) solid
        var(--nui-action-menu-shortcut-border-color);
    }

    &__arrow {
      flex-shrink: 0;
      margin-left: auto;
      padding-left: var(--nui-action-menu-arrow-padding-left);
      display: flex;
      align-items: center;
    }

    &:focus:not(&--disabled),
    &:active:not(&--disabled),
    &:hover:not(&--disabled),
    &:active:not(&--disabled) {
      outline: none;
    }

    &[disabled],
    &:disabled,
    &--disabled {
      @include mixins.disabled;
    }

    // Cuando se usa template personalizado, asegurar padding y estructura
    &--custom-template {
      padding: var(--nui-action-menu-item-padding-y)
        var(--nui-action-menu-item-padding-x);

      // El contenido del template debe tener display flex para facilitar layouts
      > * {
        width: 100%;
      }
    }
  }

  .nui-action-menu__item,
  .nui-action-menu-submenu__item {
    @include mixins.component-size(md);
    padding: var(--nui-action-menu-item-padding-y)
      var(--nui-action-menu-item-padding-x);
  }
  .nui-action-menu__item__shortcut {
    font-size: var(--nui-action-menu-shortcut-font-size);
    line-height: var(--nui-action-menu-shortcut-font-size);
  }
}

// ====================
// SUBMENU - Estilos específicos
// ====================
.nui-action-menu-submenu {
  &__item {
    gap: var(--nui-action-menu-item-gap);

    &__container {
      display: flex;
      align-items: center;
      gap: var(--nui-action-menu-item-gap);
      flex: 1 1 auto;
      overflow: hidden;
      min-width: 0;
    }

    &__label {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      display: block;
    }

    &__shortcut {
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;
      background-color: var(--nui-action-menu-shortcut-bg);
      color: var(--nui-action-menu-shortcut-color);
      padding: var(--nui-action-menu-shortcut-padding);
      border-radius: var(--nui-action-menu-shortcut-border-radius);
      border: var(--nui-action-menu-shortcut-border-width) solid
        var(--nui-action-menu-shortcut-border-color);
      margin-left: auto;
    }

    // Nota: Los estilos de selected en submenu se definen en styles/components/_action-menu.scss
  }
}
