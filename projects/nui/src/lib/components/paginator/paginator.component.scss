@import "../../../../styles/config";
@import "../../../../styles/mixins";
@import "../../../../styles/variables/paginator/paginator-variables.scss";

// =======================
// PAGINATOR CONTAINER
// =======================
.nui-paginator-container {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: var(--spacing-md);
}

// =======================
// ITEM RANGE INFO
// =======================
.nui-paginator__info {
  display: flex;
  align-items: center;

  &-text {
    font-size: var(--font-size-sm);
    color: var(--color-text-secondary);
    font-weight: var(--font-weight-medium);
  }
}

// =======================
// PAGE SIZE SELECTOR
// =======================
.nui-paginator__page-size {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  flex-wrap: wrap;

  &-label {
    font-size: var(--font-size-sm);
    color: var(--color-text-secondary);
    font-weight: var(--font-weight-medium);
    white-space: nowrap;
  }
}

// =======================
// PAGE JUMP INPUT
// =======================
.nui-paginator__page-jump {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);

  &-label {
    font-size: var(--font-size-sm);
    color: var(--color-text-secondary);
    font-weight: var(--font-weight-medium);
    white-space: nowrap;
  }

  &-input {
    width: var(--paginator-page-jump-input-width);
    padding: var(--spacing-xs) var(--spacing-sm);
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    color: var(--color-text);
    background-color: var(--surface-primary);
    border: var(--paginator-input-border-width) solid var(--color-border);
    border-radius: var(--border-radius-md);
    text-align: center;
    transition: all var(--paginator-transition-duration) var(--paginator-transition-timing);

    &--disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    // Remove spinner arrows
    &::-webkit-inner-spin-button,
    &::-webkit-outer-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    appearance: textfield;
    -moz-appearance: textfield;
  }

  &-button {
    font-weight: var(--font-weight-semibold);
    border-radius: var(--border-radius-md);
    cursor: pointer;
    transition: all var(--paginator-transition-duration) var(--paginator-transition-timing);
    white-space: nowrap;
  }
}

// =======================
// PAGINATOR BASE
// =======================
.nui-paginator {
  display: inline-flex;
  align-items: center;
  gap: var(--paginator-gap);
  user-select: none;

  // Estado deshabilitado del contenedor
  &--disabled {
    opacity: var(--paginator-disabled-opacity);
    pointer-events: none;
  }
}

// =======================
// BOTONES DE PAGINACIÓN
// =======================
.nui-paginator__button,
.nui-paginator__page-jump-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border: var(--paginator-button-border-width) solid transparent;
  border-radius: var(--border-radius-md);
  font-weight: var(--font-weight-medium);
  cursor: pointer;
  transition: all var(--paginator-transition-duration) var(--paginator-transition-timing);
  position: relative;
  z-index: var(--paginator-z-index-base);

  // Prevenir selección de texto
  user-select: none;
  -webkit-user-select: none;

  // Estados interactivos
  &:hover:not(&--disabled) {
    z-index: var(--paginator-z-index-hover);
    transform: scale(var(--paginator-animation-scale-to));
  }

  &:active:not(&--disabled) {
    z-index: var(--paginator-z-index-active);
    transform: scale(var(--paginator-animation-scale-from));
    outline: none;
  }

  &:focus-visible {
    outline: var(--paginator-focus-outline-width) solid currentColor;
    outline-offset: var(--paginator-focus-outline-offset);
  }

  // Estado deshabilitado
  &--disabled {
    cursor: not-allowed;
    opacity: var(--paginator-disabled-opacity);
  }

  // Iconos dentro de los botones
  i {
    display: flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
  }
}

// =======================
// ELLIPSIS (...)
// =======================
.nui-paginator__ellipsis {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0 0.25rem;
  color: var(--color-text-secondary);
  font-weight: var(--font-weight-medium);
  user-select: none;
}

// =======================
// TAMAÑOS
// =======================

@each $size-key in (xs, s, sm, md, lg, xl) {
  .nui-paginator-container--#{$size-key} {
    @include paginator-size(#{$size-key});
  }
}

// =======================
// COLORES Y VARIANTES
// =======================
@each $color in (primary, secondary, success, info, warning, danger, accent) {
  .nui-paginator-container {
    @include paginator-colors("solid", $color);
    @include paginator-colors("outline", $color);
    @include paginator-colors("ghost", $color);
  }
}

// =======================
// ACCESSIBILITY & LOADING
// =======================
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

.nui-paginator__loading {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  padding: var(--spacing-sm) var(--spacing-md);
  background-color: var(--color-background-overlay);
  border-radius: var(--border-radius-md);
  border: 1px solid var(--color-border);

  &-text {
    font-size: var(--font-size-sm);
    color: var(--color-text-secondary);
    font-weight: var(--font-weight-medium);
  }
}

// =======================
// MODO INFINITO
// =======================
.nui-paginator__infinite {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--spacing-md);
  width: 100%;

  &-counter {
    display: flex;
    align-items: center;
    justify-content: center;

    &-text {
      font-size: var(--font-size-sm);
      color: var(--color-text-secondary);
      font-weight: var(--font-weight-medium);
      text-align: center;
    }
  }

  &-end {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--spacing-md);

    &-text {
      font-size: var(--font-size-sm);
      color: var(--color-text-disabled);
      font-style: italic;
    }
  }
}

.nui-paginator__load-more-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-xs);
  border: 1px solid transparent;
  border-radius: var(--border-radius-md);
  font-weight: var(--font-weight-medium);
  cursor: pointer;
  transition: all var(--transition-duration-fast) var(--transition-easing);

  &:disabled {
    cursor: not-allowed;
    opacity: var(--opacity-disabled);
  }

  &--loading {
    .nui-paginator__loading-icon {
      animation: spin 1s linear infinite;
    }
  }
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

// =======================
// MODO COMPACTO
// =======================
.nui-paginator-container--fractional,
.nui-paginator-container--compact {
  .nui-paginator__current-page,
  .nui-paginator__fractional-info {
    display: flex;
    align-items: center;
    margin: 0 var(--paginator-compact-spacing);
  }
}

// =======================
// CUSTOM LAYOUT SYSTEM
// =======================
.nui-paginator-container--custom-layout {
  display: flex;

  // El contenedor principal usa el layout configurado
  // Las propiedades flex-direction, justify-content y gap se configuran inline desde el template

  // Área individual
  .nui-paginator__area {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);

    // Áreas específicas
    &--top,
    &--bottom {
      width: 100%;
      justify-content: center;
    }

    &--left {
      justify-content: flex-start;
      margin-right: auto;
    }

    &--center {
      justify-content: center;
      flex: 1; // Ocupa el espacio disponible
    }

    &--right {
      justify-content: flex-end;
      margin-left: auto;
    }
  }

  // Contenedor horizontal para left, center y right
  .nui-paginator__horizontal-areas {
    display: flex;
    align-items: center;
    width: 100%;
    gap: var(--spacing-md);
    flex-wrap: wrap;
  }
}

// Si el contenedor principal es column, las áreas horizontales se apilan verticalmente
.nui-paginator-container--layout-column {
  .nui-paginator__horizontal-areas {
    flex-direction: column;
  }
}

// Responsive: en móviles, todas las áreas se apilan verticalmente
// Solo si NO hay layout inline personalizado (el TS ya maneja la lógica de layouts)
@media (max-width: 768px) {
  .nui-paginator-container--custom-layout:not([style*="flex-direction"]) {
    flex-direction: column;

    .nui-paginator__horizontal-areas {
      flex-direction: column;
    }
  }

  .nui-paginator__area {
    width: 100%;
    justify-content: center;
    flex-wrap: wrap; // Permitir que los elementos se envuelvan
    gap: var(--spacing-xs);

    // El área center (navegación) debe permitir wrap para los botones de página
    &--center {
      flex-wrap: wrap;
      justify-content: center;
    }

    &--bottom,
    &--top {
      margin: 0;
      justify-content: center;
      .nui-paginator__page-size,
      .nui-paginator__info {
        justify-content: center;
      }
    }
  }

  .nui-paginator__page-jump {
    gap: var(--spacing-xs);
  }

  .nui-paginator-container--wrap {
    .nui-paginator {
      flex-wrap: wrap;
      gap: var(--spacing-xs);
    }
  }

  // Permitir que los elementos se envuelvan en móviles (sin !important para respetar layouts personalizados)
  .nui-paginator {
    flex-wrap: wrap;
    justify-content: center;
  }
}
