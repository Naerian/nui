@use './../../../../styles/variables/button-group-vars';

:host {
  @include button-group-vars.nui-btn-group-vars;
}

@mixin button-group-theme($variant, $color-name) {
  --grp-track-bg: var(--nui-btn-group-#{$color-name}-#{$variant}-track-bg, transparent);
  --grp-track-border: var(--nui-btn-group-#{$color-name}-#{$variant}-track-border, transparent);

  --grp-base-bg: var(--nui-btn-group-#{$color-name}-#{$variant}-base-bg);
  --grp-base-text: var(--nui-btn-group-#{$color-name}-#{$variant}-base-text);
  --grp-base-border: var(--nui-btn-group-#{$color-name}-#{$variant}-base-border);
  --grp-hover-bg: var(--nui-btn-group-#{$color-name}-#{$variant}-hover-bg);

  --grp-sel-bg: var(--nui-btn-group-#{$color-name}-#{$variant}-sel-bg);
  --grp-sel-text: var(--nui-btn-group-#{$color-name}-#{$variant}-sel-text);
  --grp-sel-border: var(--nui-btn-group-#{$color-name}-#{$variant}-sel-border);
}

.nui-btn-group {
  display: inline-flex;
  align-items: stretch;
  position: relative;
  border-radius: var(--nui-btn-group-radius);
  user-select: none;
  isolation: isolate;
  transition: var(--nui-btn-group-transition);
  border: 1px solid var(--grp-track-border);

  &--full {
    display: flex;
    width: 100%;
    .nui-btn-group__option {
      flex: 1;
    }
  }

  &--fit {
    width: fit-content;
  }
  &--auto {
    width: auto;
  }

  // ==================================================
  // OPTION STYLES
  // ==================================================
  &__option {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    position: relative;
    white-space: nowrap;
    cursor: pointer;
    background-color: var(--grp-base-bg);
    color: var(--grp-base-text);
    border: var(--nui-border-width-xs) solid var(--grp-base-border);
    font-family: var(--nui-font-family);
    font-weight: var(--nui-font-weight-medium);
    transition: all var(--nui-transition-duration-fast) var(--nui-transition-timing-function-ease);
    z-index: var(--nui-btn-group-z-index-base);

    &:not(:first-child) {
      margin-left: var(--nui-btn-group-overlap, -1px);
    }

    &:first-child {
      border-top-left-radius: inherit;
      border-bottom-left-radius: inherit;
    }

    &:last-child {
      border-top-right-radius: inherit;
      border-bottom-right-radius: inherit;
    }

    &:hover:not(&--selected):not(&--disabled) {
      background-color: var(--grp-hover-bg);
      z-index: 2;
    }

    &--selected {
      background-color: var(--grp-sel-bg);
      color: var(--grp-sel-text);
      border-color: var(--grp-sel-border);
      z-index: 3;
    }

    &--disabled {
      opacity: var(--nui-btn-group-disabled-opacity);
      cursor: not-allowed;
      pointer-events: none;
    }
  }

  &__icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }

  &__label {
    line-height: 1;
  }

  // ==================================================
  // SIZES
  // ==================================================
  $sizes: xs, sm, md, lg, xl;
  @each $size in $sizes {
    &--#{$size} {
      .nui-btn-group__option {
        height: var(--nui-height-#{$size});
        padding: var(--nui-padding-#{$size});
        font-size: var(--nui-font-size-#{$size});
        gap: var(--nui-spacing-xs);
      }
      .nui-btn-group__icon {
        font-size: var(--nui-btn-group-icon-size-#{$size});
      }
    }
  }

  // ==================================================
  // VARIANTS & COLORS
  // ==================================================
  $variants: solid, outline, ghost, segmented;
  $colors: primary, secondary, success, info, warning, danger, accent, neutral;
  @each $color in $colors {
    &--#{$color} {
      @each $variant in $variants {
        &.nui-btn-group--#{$variant} {
          @include button-group-theme($variant, $color);
        }
      }
    }
  }

  // ==================================================
  // SEGMENTED (Special variant with unique styles)
  // ==================================================
  &--segmented {
    gap: var(--nui-btn-group-segmented-gap);
    background-color: var(--nui-bg-secondary);
    padding: var(--nui-btn-group-segmented-padding);

    .nui-btn-group__option {
      margin: 0 !important;
      border-radius: calc(var(--nui-btn-group-radius) - var(--nui-btn-group-segmented-padding));

      &--selected {
        box-shadow: var(--nui-box-shadow-sm);
      }
    }
  }
}
