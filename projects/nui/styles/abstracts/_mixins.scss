@use '../config';
@use 'sass:list';
@use 'sass:map';

/// =======================================
/// TYPOGRAPHY MIXINS
/// =======================================

/// Applies typographic styles for heading levels (`h1`â€“`h6`)
/// Uses CSS variables to ensure theme consistency
/// @group Typography
/// @access public
/// @since 1.0.0
/// @param {String} $level - Heading level (`h1`, `h2`, `h3`, `h4`, `h5`, `h6`)
/// @example scss
///   @include heading(h1);
@mixin heading($level) {
  margin: 0;
  margin-bottom: var(--nui-spacing-md);
  font-size: var(--nui-font-size-#{$level});
  line-height: var(--nui-line-height-#{$level});

  $weight: 'semibold';

  @if list.index((h1, h2, h3), $level) {
    $weight: 'bold';
  }

  font-weight: var(--nui-font-weight-#{$weight});
  color: var(--nui-text-primary);
}

/// =======================================
/// STATE MIXINS
/// =======================================

/// Applies a disabled visual and interaction state
/// Prevents pointer interaction while preserving focus visibility
/// @group State
/// @access public
/// @since 1.0.0
/// @param {Number} $opacity [0.5] - Opacity applied to the disabled element
/// @example scss
///   @include disabled;
///   @include disabled(0.6);
@mixin disabled($opacity: 0.5) {
  opacity: $opacity;
  cursor: not-allowed;
  pointer-events: none;
  filter: grayscale(30%);

  &:focus-visible {
    outline-color: var(--outline-disabled-color, var(--nui-color-gray-400));
    outline-width: var(--nui-border-width-xs);
    outline-style: solid;
  }
}

/// =======================================
/// UTILITY MIXINS
/// =======================================

/// Truncates single-line text with an ellipsis
/// @group Utilities
/// @access public
/// @since 1.0.0
/// @example scss
///   @include ellipsis-text;
@mixin ellipsis-text {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/// Truncates multi-line text with an ellipsis
/// @group Utilities
/// @access public
/// @since 1.0.0
/// @param {Number} $lines - Number of lines to display before truncation
/// @example scss
///  @include multiline-ellipsis(3);
@mixin text-truncate {
  display: block;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/// Applies an accessible focus ring using `:focus-visible`
/// Conforms to design-system accessibility guidelines
/// @group Utilities
/// @access public
/// @since 1.0.0
/// @param {Color} $color [var(--nui-focus-ring-color)] - Focus ring color
/// @example scss
///   @include focus-ring;
@mixin focus-ring($color: var(--nui-focus-ring-color)) {
  &:focus-visible {
    outline: var(--nui-focus-ring-width) solid #{$color};
    outline-offset: var(--nui-focus-ring-offset);
    border-radius: var(--nui-focus-ring-radius);
    box-shadow:
      0 0 0 calc(var(--nui-focus-ring-width) + 1px) var(--nui-bg-primary),
      0 0 0 calc(var(--nui-focus-ring-width) + 2px) #{$color};
  }
}

/// =======================================
/// RESPONSIVE MIXINS
/// =======================================

/// Media query for extra-small screens
/// @group Responsive
/// @access public
/// @since 1.0.0
/// @example scss
///   @include media-xs { font-size: 12px; }
@mixin media-xs {
  @media (max-width: #{config.$breakpoint-sm - 1}) {
    @content;
  }
}

/// Media query for small screens and up
/// @group Responsive
/// @access public
/// @since 1.0.0
/// @example scss
///   @include media-sm { font-size: 14px; }
@mixin media-sm {
  @media (min-width: #{config.$breakpoint-sm}) {
    @content;
  }
}

/// Media query for medium screens and up
/// @group Responsive
/// @access public
/// @since 1.0.0
/// @example scss
///   @include media-md { font-size: 16px; }
@mixin media-md {
  @media (min-width: #{config.$breakpoint-md}) {
    @content;
  }
}

/// Media query for large screens and up
/// @group Responsive
/// @access public
/// @since 1.0.0
/// @example scss
///   @include media-lg { font-size: 18px; }
@mixin media-lg {
  @media (min-width: #{config.$breakpoint-lg}) {
    @content;
  }
}

/// Media query for extra-large screens and up
/// @group Responsive
/// @access public
/// @since 1.0.0
/// @example scss
///   @include media-xl { font-size: 20px; }
@mixin media-xl {
  @media (min-width: #{config.$breakpoint-xl}) {
    @content;
  }
}

/// Media query for extra-extra-large screens and up
/// @group Responsive
/// @access public
/// @since 1.0.0
/// @example scss
///   @include media-xxl { font-size: 22px; }
@mixin media-xxl {
  @media (min-width: #{config.$breakpoint-xxl}) {
    @content;
  }
}

/// =======================================
/// OVERLAY MIXINS
/// =======================================

/// Creates a full-screen backdrop overlay
/// Optimized for opacity transitions and GPU compositing
/// @group Overlay
/// @access public
/// @since 1.0.0
/// @example scss
///   .backdrop {
///     @include overlay-backdrop();
///   }
@mixin overlay-backdrop() {
  position: fixed;
  inset: 0;
  background-color: var(--nui-color-backdrop);
  transition: opacity 225ms cubic-bezier(0, 0, 0.2, 1);
  will-change: opacity;
  transform: translateZ(0);
  backface-visibility: hidden;
  -webkit-font-smoothing: antialiased;
  contain: strict;
  backdrop-filter: blur(2px);
  -webkit-backdrop-filter: blur(2px);
}
